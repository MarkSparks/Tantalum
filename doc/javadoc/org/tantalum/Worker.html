<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_15) on Wed Feb 20 17:50:00 CET 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Worker</title>
<meta name="date" content="2013-02-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Worker";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Worker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../org/tantalum/Workable.html" title="interface in org.tantalum"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?org/tantalum/Worker.html" target="_top">Frames</a></li>
<li><a href="Worker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.tantalum</div>
<h2 title="Class Worker" class="title">Class Worker</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.lang.Thread</li>
<li>
<ul class="inheritance">
<li>org.tantalum.Worker</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="strong">Worker</span>
extends java.lang.Thread</pre>
<div class="block">A generic worker thread. Long-running and background tasks are queued and
 executed here to keep the user interface thread free to update and respond to
 incoming user interface events.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#HIGH_PRIORITY">HIGH_PRIORITY</a></strong></code>
<div class="block">Start the task as soon as possible.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#LARGE_MEMORY_MUTEX">LARGE_MEMORY_MUTEX</a></strong></code>
<div class="block">Synchronize on the following object if your processing routine will
 temporarily need a large amount of memory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#LOW_PRIORITY">LOW_PRIORITY</a></strong></code>
<div class="block">Start execution if there is nothing else for the Workers to do.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#NORMAL_PRIORITY">NORMAL_PRIORITY</a></strong></code>
<div class="block">Start execution after any previously fork()ed work, first in is usually
 first out, however multiple Workers in parallel means that execution
 start and completion order is not guaranteed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_java.lang.Thread">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.lang.Thread</h3>
<code>MAX_PRIORITY, MIN_PRIORITY, NORM_PRIORITY</code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#fork(org.tantalum.Workable)">fork</a></strong>(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable)</code>
<div class="block">Add an object to be executed in the background on the worker thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#fork(org.tantalum.Workable, int)">fork</a></strong>(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable,
    int&nbsp;priority)</code>
<div class="block">Worker.HIGH_PRIORITY : Jump an object to the beginning of the forkSerial
 (LIFO - Last In First Out).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#forkSerial(org.tantalum.Workable, int)">forkSerial</a></strong>(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable,
          int&nbsp;serialQIndex)</code>
<div class="block">Queue compute to the Worker specified by serialQIndex.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#forkShutdownTask(org.tantalum.Workable)">forkShutdownTask</a></strong>(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable)</code>
<div class="block">Add an object to be executed in the background on the worker thread</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#getNumberOfWorkers()">getNumberOfWorkers</a></strong>()</code>
<div class="block">For unit testing</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#nextSerialWorkerIndex()">nextSerialWorkerIndex</a></strong>()</code>
<div class="block">Get the id number for the next available Worker thread that can be used
 to a specific application-define type of Worker.forkSerial() operations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#run()">run</a></strong>()</code>
<div class="block">Main worker loop.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#shutdown(boolean)">shutdown</a></strong>(boolean&nbsp;block)</code>
<div class="block">Call MIDlet.doNotifyDestroyed() after all current queued and shutdown
 Workable tasks are completed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../org/tantalum/Worker.html#tryUnfork(org.tantalum.Workable)">tryUnfork</a></strong>(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable)</code>
<div class="block">Take an object out of the pending task queue.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Thread">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Thread</h3>
<code>activeCount, currentThread, getName, getPriority, interrupt, isAlive, join, setPriority, sleep, start, toString, yield</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="HIGH_PRIORITY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HIGH_PRIORITY</h4>
<pre>public static final&nbsp;int HIGH_PRIORITY</pre>
<div class="block">Start the task as soon as possible. The fork() operation will place this
 as the next Workable to be completed unless subsequent HIGH_PRIORITY fork
 operations occur before a Worker start execution.

 This is the normal priority for user interface tasks where the user
 expects a fast response regardless of previous incomplete requests they
 may have made.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#org.tantalum.Worker.HIGH_PRIORITY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="NORMAL_PRIORITY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NORMAL_PRIORITY</h4>
<pre>public static final&nbsp;int NORMAL_PRIORITY</pre>
<div class="block">Start execution after any previously fork()ed work, first in is usually
 first out, however multiple Workers in parallel means that execution
 start and completion order is not guaranteed.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#org.tantalum.Worker.NORMAL_PRIORITY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LOW_PRIORITY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOW_PRIORITY</h4>
<pre>public static final&nbsp;int LOW_PRIORITY</pre>
<div class="block">Start execution if there is nothing else for the Workers to do. At least
 one Worker will always be left idle for immediate activation if only
 LOW_PRIORITY work is queued for execution. This is intended for
 background tasks such as pre-fetch and pre-processing of data that doe
 not affect the current user view.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#org.tantalum.Worker.LOW_PRIORITY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="LARGE_MEMORY_MUTEX">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LARGE_MEMORY_MUTEX</h4>
<pre>public static final&nbsp;java.lang.Object LARGE_MEMORY_MUTEX</pre>
<div class="block">Synchronize on the following object if your processing routine will
 temporarily need a large amount of memory. Only one such activity can be
 active at a time.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="fork(org.tantalum.Workable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fork</h4>
<pre>public static&nbsp;void&nbsp;fork(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable)</pre>
<div class="block">Add an object to be executed in the background on the worker thread. This
 well be executed FIFO (First In First Out), but some Worker threads may
 be occupied with their own serialQueue() tasks which they prioritize over
 main forkSerial compute.

 Shutdown() will be delayed indefinitely until items in the forkSerial
 complete execution. If the shutdown signal comes from the phone (usually
 because the user pressed the RED button to exit the application), then
 shutdown will be delayed by a maximum of 3 seconds before forcing exit.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>workable</code> - </dd></dl>
</li>
</ul>
<a name="fork(org.tantalum.Workable, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fork</h4>
<pre>public static&nbsp;void&nbsp;fork(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable,
        int&nbsp;priority)</pre>
<div class="block">Worker.HIGH_PRIORITY : Jump an object to the beginning of the forkSerial
 (LIFO - Last In First Out).

 Note that this is best used for ensuring that operations holding a lot of
 memory are finished as soon as possible. If you are relying on this for
 performance, be warned that multiple calls to this method may still bog
 the system down.

 Note also that under the rare circumstance that all Workers are busy with
 serialQueue() tasks, forkPriority() compute may be delayed. The
 recommended solution then is to either increase the number of Workers.
 You may also want to decrease reliance on serialQueue() elsewhere in you
 your program and make your application logic more parallel.

 Worker.LOW_PRIORITY : Add an object to be executed at low priority in the
 background on the worker thread. Execution will only begin when there are
 no foreground tasks, and only if at least 1 Worker thread is left ready
 for immediate execution of normal priority Workable tasks.

 Items in the idleQueue will not be executed if shutdown() is called
 before they begin.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>workable</code> - </dd><dd><code>priority</code> - </dd></dl>
</li>
</ul>
<a name="tryUnfork(org.tantalum.Workable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryUnfork</h4>
<pre>public static&nbsp;boolean&nbsp;tryUnfork(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable)</pre>
<div class="block">Take an object out of the pending task queue. If the task has already
 been started, or has not been fork()ed, or has been forkSerial() assigned
 to a dedicated thread queue, then this will return false.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>workable</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="forkSerial(org.tantalum.Workable, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forkSerial</h4>
<pre>public static&nbsp;void&nbsp;forkSerial(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable,
              int&nbsp;serialQIndex)</pre>
<div class="block">Queue compute to the Worker specified by serialQIndex. This compute will
 be done after any previously serialQueue()d compute to this Worker. This
 Worker will do only serialQueue() tasks until they are complete, then
 will revert to doing general forkSerial(), forkPriority() and
 forkLowPriority()</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>workable</code> - </dd><dd><code>serialQIndex</code> - </dd></dl>
</li>
</ul>
<a name="nextSerialWorkerIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextSerialWorkerIndex</h4>
<pre>public static&nbsp;int&nbsp;nextSerialWorkerIndex()</pre>
<div class="block">Get the id number for the next available Worker thread that can be used
 to a specific application-define type of Worker.forkSerial() operations.
 Assuming you have a limited number of types of forkSerial() operations,
 this round-robin allocation reduces the number of serialized operations
 assigned to any one generic Worker. Note that since forkSerial() work is
 done by the specified Worker before general fork() operations, it is
 higher priority work than a fork() with HIGH_PRIORITY, but only one
 Worker can execute that type of task.

 You can use this to guarantee the sequence of execution of a given type
 of task (such as writing to flash memory or to a server).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="forkShutdownTask(org.tantalum.Workable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forkShutdownTask</h4>
<pre>public static&nbsp;void&nbsp;forkShutdownTask(<a href="../../org/tantalum/Workable.html" title="interface in org.tantalum">Workable</a>&nbsp;workable)</pre>
<div class="block">Add an object to be executed in the background on the worker thread</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>workable</code> - </dd></dl>
</li>
</ul>
<a name="shutdown(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public static&nbsp;void&nbsp;shutdown(boolean&nbsp;block)</pre>
<div class="block">Call MIDlet.doNotifyDestroyed() after all current queued and shutdown
 Workable tasks are completed. Resources held by the system will be closed
 and queued compute such as writing to the RMS or file system will
 complete.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>block</code> - Block the calling thread up to three seconds to allow
 orderly shutdown. This is only needed in MIDlet.doNotifyDestroyed(true)
 which is called for example by the user pressing the red HANGUP button.</dd></dl>
</li>
</ul>
<a name="getNumberOfWorkers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfWorkers</h4>
<pre>public static&nbsp;int&nbsp;getNumberOfWorkers()</pre>
<div class="block">For unit testing</div>
<dl><dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Main worker loop. Each Worker thread pulls tasks from the common
 forkSerial.

 The worker thread exits on uncaught errors or after shutdown() has been
 called and all pending tasks and shutdown tasks have completed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>run</code>&nbsp;in class&nbsp;<code>java.lang.Thread</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Worker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../org/tantalum/Workable.html" title="interface in org.tantalum"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?org/tantalum/Worker.html" target="_top">Frames</a></li>
<li><a href="Worker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
